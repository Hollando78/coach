:root[data-theme=dark]{--bg: #0a0a0a;--panel: #1a1a1a;--accent: #4ECDC4;--ok: #51cf66;--warn: #ffd43b;--grid: #2a2a2a;--text: #ffffff;--text-dim: #adb5bd;--player-glow: rgba(78, 205, 196, .3);--cell-size: 20px}:root[data-theme=light]{--bg: #ffffff;--panel: #f8f9fa;--accent: #0d6efd;--ok: #198754;--warn: #fd7e14;--grid: #6c757d;--text: #212529;--text-dim: #6c757d;--player-glow: rgba(13, 110, 253, .15);--cell-size: 20px}:root{--bg: #0a0a0a;--panel: #1a1a1a;--accent: #4ECDC4;--ok: #51cf66;--warn: #ffd43b;--grid: #2a2a2a;--text: #ffffff;--text-dim: #adb5bd;--player-glow: rgba(78, 205, 196, .3);--cell-size: 20px}@media (prefers-contrast: high){:root[data-theme=dark]{--bg: #000000;--panel: #1a1a1a;--accent: #00ffff;--ok: #00ff00;--warn: #ffff00;--grid: #666666;--text: #ffffff;--text-dim: #cccccc}:root[data-theme=light]{--bg: #ffffff;--panel: #f0f0f0;--accent: #0044aa;--ok: #004400;--warn: #cc4400;--grid: #000000;--text: #000000;--text-dim: #444444}}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;line-height:1.6;color:var(--text);background:var(--bg)}.app{min-height:100vh}.loading{display:flex;align-items:center;justify-content:center;min-height:200px;font-size:18px;color:#666}.territory-game-container *{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input,textarea,.selectable-text{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important}body{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body.territory-mode,body.territory-mode html{touch-action:manipulation;overflow:hidden}body.pseudo-fullscreen{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;margin:0!important;padding:0!important;overflow:hidden!important;z-index:999999!important}body.pseudo-fullscreen *{box-sizing:border-box}.territory-game-container.enhanced-immersive{position:fixed!important;top:0!important;left:0!important;right:0!important;bottom:0!important;width:100vw!important;height:100vh!important;z-index:999999!important;background:#1a1a1a!important}.territory-game-container{position:fixed!important;top:0;left:0;right:0;bottom:0;width:100vw!important;height:100vh!important;height:100dvh!important;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;display:flex;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;overflow:hidden;z-index:9999;min-height:-webkit-fill-available;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}.territory-sidebar{width:250px;min-width:250px;background:var(--panel);padding:20px;padding-top:max(20px,env(safe-area-inset-top));padding-left:max(20px,env(safe-area-inset-left));padding-right:20px;border-right:1px solid var(--grid);overflow-y:auto;-webkit-overflow-scrolling:touch;touch-action:pan-y}.territory-main-area{flex:1;position:relative;display:flex;flex-direction:column;overflow:hidden;touch-action:none}.territory-canvas-container{flex:1;position:relative;overflow:hidden;touch-action:none;background:var(--bg)}@keyframes cellPlacement{0%{transform:scale(.8);opacity:.7}to{transform:scale(1);opacity:1}}@keyframes cellFlip{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.cell-animation{animation:cellPlacement .2s ease-out}.cell-flip-animation{animation:cellFlip .18s ease-out}.moves-bar{display:flex;align-items:center;background:var(--panel);border-radius:20px;padding:8px 12px;margin:10px 0;border:1px solid var(--grid)}.moves-progress{flex:1;height:8px;background:var(--grid);border-radius:4px;overflow:hidden;margin-right:10px}.moves-fill{height:100%;background:linear-gradient(90deg,var(--ok),var(--accent));border-radius:4px;transition:width .3s ease}.moves-text{font-size:12px;font-weight:600;color:var(--text);min-width:40px;text-align:center}.scoreboard-row{display:flex;align-items:center;padding:8px 12px;margin:4px 0;border-radius:8px;background:var(--panel);border:1px solid var(--grid);transition:all .2s ease}.scoreboard-row.current-player{background:var(--panel);border-color:var(--accent);box-shadow:0 0 12px var(--player-glow)}.player-swatch{width:20px;height:20px;border-radius:4px;margin-right:10px;border:1px solid var(--grid);flex-shrink:0}.player-name{flex:1;font-size:14px;color:var(--text);font-weight:500}.player-score{font-size:12px;color:var(--text-dim);font-weight:600}@keyframes playerPulse{0%,to{box-shadow:0 0 12px var(--player-glow)}50%{box-shadow:0 0 20px var(--accent)}}.scoreboard-row.player-acting{animation:playerPulse 1.5s ease-in-out}.territory-touch-controls{position:absolute;bottom:20px;right:20px;display:flex;flex-direction:column;gap:10px;z-index:1000}.mobile-toolbar{position:fixed;bottom:0;left:0;right:0;background:var(--panel);border-top:1px solid var(--grid);padding:12px;padding-bottom:max(12px,env(safe-area-inset-bottom));display:flex;align-items:center;justify-content:space-between;z-index:1001}.toolbar-section{display:flex;align-items:center;gap:8px}.toolbar-button{min-width:44px;min-height:44px;border-radius:12px;background:var(--bg);border:1px solid var(--grid);color:var(--text);font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:all .2s}.touch-control-button{width:60px;height:60px;border-radius:50%;background:var(--panel);border:2px solid var(--accent);color:var(--text);font-size:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:all .2s}.touch-control-button:active{background:var(--accent);transform:scale(.95)}.mobile-toolbar{position:fixed;bottom:0;left:0;right:0;height:60px;background:var(--panel);border-top:1px solid var(--grid);display:flex;align-items:center;justify-content:space-between;padding:0 env(safe-area-inset-left) env(safe-area-inset-bottom) env(safe-area-inset-right);z-index:1000}.toolbar-moves{flex:1;max-width:200px;margin:0 16px}.toolbar-zoom{display:flex;gap:8px}.toolbar-button{min-width:44px;height:44px;border-radius:8px;background:var(--panel);border:1px solid var(--grid);color:var(--text);font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:all .2s}.toolbar-button:active{background:var(--accent);transform:scale(.95)}.floating-game-info{position:fixed;top:20px;right:20px;z-index:1000}.game-info-toggle{width:50px;height:50px;border-radius:50%;background:var(--panel);border:1px solid var(--grid);color:var(--text);font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:all .2s;box-shadow:0 4px 12px #0000004d}.game-info-toggle:hover{background:var(--grid);transform:scale(1.05)}.burger-icon{display:flex;flex-direction:column;gap:3px;align-items:center;justify-content:center}.burger-icon span{width:18px;height:2px;background:var(--text);border-radius:1px;transition:all .2s ease}.game-info-toggle:hover .burger-icon span{background:var(--text)}.game-info-panel{position:absolute;top:60px;right:0;width:200px;background:var(--panel);border:1px solid var(--grid);border-radius:6px;padding:12px;box-shadow:0 8px 24px #0006;animation:slideIn .2s ease-out}@keyframes slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.game-info-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.game-info-header h4{margin:0;color:var(--text);font-size:14px;font-weight:600}.player-info-compact{display:flex;align-items:center;gap:6px}.player-color-indicator-small{width:16px;height:16px;border-radius:3px;border:1px solid var(--grid)}.player-info-compact span{color:var(--text-dim);font-size:12px;font-family:monospace}.compact-leave-button{width:100%;padding:8px 12px;margin-top:12px;background:var(--panel);color:var(--text);border:1px solid var(--grid);border-radius:4px;cursor:pointer;transition:all .2s;font-size:12px}.game-info-actions .compact-leave-button{width:auto;margin-top:0}.compact-leave-button:hover{background:var(--grid)}.game-info-actions{display:flex;gap:8px;margin-top:12px}.compact-theme-button{flex:1;padding:8px 12px;background:var(--panel);color:var(--text);border:1px solid var(--accent);border-radius:4px;cursor:pointer;transition:all .2s;font-size:11px;display:flex;align-items:center;justify-content:center;gap:4px}.compact-theme-button:hover{background:var(--accent);color:var(--panel)}.compact-leave-button{flex:1}.theme-toggle{position:fixed;top:20px;left:20px;width:50px;height:50px;border-radius:50%;background:var(--panel);border:1px solid var(--grid);color:var(--text);font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:all .2s;box-shadow:0 4px 12px #0000004d;z-index:1000}.theme-toggle:hover{background:var(--grid);transform:scale(1.05)}.theme-toggle:active{transform:scale(.95)}.touch-control-group{display:flex;gap:10px}.touch-zoom-controls{position:absolute;bottom:20px;left:20px;display:flex;flex-direction:column;gap:10px}.zoom-control-button{width:50px;height:50px;border-radius:8px;background:#000c;border:2px solid #4ECDC4;color:#fff;font-size:20px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:all .2s}.zoom-control-button:active{background:#4ecdc44d;transform:scale(.95)}.territory-canvas{touch-action:pinch-zoom pan-x pan-y!important;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;cursor:crosshair}.toast-container{position:fixed;top:20px;right:20px;z-index:10000;pointer-events:none}.toast{background:var(--panel);border:1px solid var(--accent);border-radius:8px;padding:12px 16px;margin-bottom:8px;color:var(--text);font-size:14px;font-weight:500;box-shadow:0 4px 12px #0000004d;transform:translate(100%);animation:slideIn .3s ease-out forwards}.toast.success{border-color:var(--ok)}.toast.warning{border-color:var(--warn)}@keyframes slideIn{to{transform:translate(0)}}@keyframes slideOut{to{transform:translate(100%);opacity:0}}.toast.removing{animation:slideOut .3s ease-in forwards}.grid-lines{position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;opacity:.3;transition:opacity .3s ease}.grid-lines.visible{opacity:.6}.grid-lines.hidden{opacity:0}@media (max-width: 768px){.territory-sidebar{width:180px;min-width:180px;padding:12px;font-size:13px}.territory-sidebar h3{font-size:14px;margin-bottom:10px}.territory-sidebar h4{font-size:12px;margin-bottom:8px}.touch-control-button{width:50px;height:50px;font-size:20px}.zoom-control-button{width:45px;height:45px;font-size:18px}.auth-container{padding:10px}.debug-info{font-size:10px;max-height:100px;overflow-y:auto}}@media (max-width: 480px) and (orientation: portrait){.territory-game-container{flex-direction:column}.territory-sidebar{width:100%;min-width:100%;height:120px;max-height:120px;padding:8px;padding-top:max(8px,env(safe-area-inset-top));padding-left:max(8px,env(safe-area-inset-left));padding-right:max(8px,env(safe-area-inset-right));border-right:none;border-bottom:1px solid #444;display:flex;overflow-x:auto;overflow-y:hidden;white-space:nowrap}.territory-sidebar>div{display:inline-block;margin-right:15px;white-space:normal;vertical-align:top;min-width:120px}.territory-main-area{flex:1;height:calc(100vh - 120px);height:calc(100dvh - 120px)}}@media (max-width: 768px){.territory-game-container *{touch-action:manipulation}.territory-game-container .territory-canvas{touch-action:pinch-zoom pan-x pan-y!important}}.error{padding:12px;margin:16px 0;background:#fee;border:1px solid #fcc;border-radius:4px;color:#c33}.debug-info{padding:8px;margin:12px 0;background:#e8f5e8;border:1px solid #4caf50;border-radius:4px;color:#2e7d32;font-size:12px;word-break:break-all}.connection-info{margin-bottom:15px;padding:8px;background:#f8f9fa;border-radius:4px;text-align:center}.test-buttons{margin:15px 0;display:flex;gap:10px}.btn-test{padding:8px 12px;background:#17a2b8;color:#fff;border:none;border-radius:4px;font-size:12px;cursor:pointer}.btn-primary{background:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;transition:background .2s}.btn-primary:hover:not(:disabled){background:#0056b3}.btn-secondary{background:#6c757d;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;transition:background .2s}.btn-secondary:hover:not(:disabled){background:#545b62}button:disabled{opacity:.6;cursor:not-allowed}.territory-auth-container{min-height:100vh;position:relative;display:flex;align-items:center;justify-content:center;background:var(--bg);overflow:hidden}.territory-grid-bg{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,var(--grid) 1px,transparent 1px),linear-gradient(var(--grid) 1px,transparent 1px);background-size:40px 40px;opacity:.1;animation:gridShift 20s linear infinite}@keyframes gridShift{0%{transform:translate(0)}to{transform:translate(40px,40px)}}.territory-auth-overlay{position:relative;z-index:2;background:radial-gradient(ellipse at center,rgba(78,205,196,.05) 0%,transparent 70%);min-height:100vh;width:100%;display:flex;align-items:center;justify-content:center}.territory-auth-form{background:var(--panel);padding:40px;border-radius:16px;box-shadow:0 20px 40px #0000004d,0 0 0 1px var(--grid),inset 0 0 20px #4ecdc40d;width:100%;max-width:450px;border:2px solid var(--grid);position:relative}.territory-auth-form:before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,var(--accent),var(--ok),var(--accent));border-radius:16px;z-index:-1;opacity:.3;animation:borderGlow 3s ease-in-out infinite}@keyframes borderGlow{0%,to{opacity:.3}50%{opacity:.6}}.territory-logo-section{text-align:center;margin-bottom:30px}.territory-logo{margin-bottom:20px}.logo-grid{display:inline-grid;grid-template-columns:repeat(3,20px);gap:2px;margin-bottom:15px}.logo-cell{width:20px;height:20px;border:1px solid var(--grid);border-radius:3px;background:var(--panel)}.logo-cell.player1{background:var(--accent);box-shadow:0 0 8px #4ecdc480}.logo-cell.player2{background:var(--ok);box-shadow:0 0 8px #51cf6680}.territory-auth-form h1{text-align:center;margin:0 0 10px;color:var(--text);font-size:28px;font-weight:700;text-shadow:0 2px 4px rgba(0,0,0,.3)}.territory-tagline{color:var(--text-dim);font-size:14px;font-style:italic;margin:0}.territory-error{padding:12px;margin:16px 0;background:var(--panel);border:1px solid var(--warn);border-radius:6px;color:var(--warn);font-size:14px;text-align:center}.territory-debug-info{padding:8px;margin:12px 0;background:#51cf661a;border:1px solid var(--ok);border-radius:6px;color:var(--text-dim);font-size:11px;font-family:monospace;word-break:break-all}.territory-connection-info{margin-bottom:20px;padding:8px 12px;background:#4ecdc41a;border:1px solid var(--accent);border-radius:6px;text-align:center;font-size:11px;color:var(--text-dim)}.territory-test-section{margin:25px 0;padding:20px;background:#4ecdc40d;border:1px solid var(--grid);border-radius:8px}.territory-test-section h3{margin:0 0 15px;color:var(--text);font-size:16px;text-align:center}.territory-test-buttons{display:flex;gap:8px;margin:10px 0;flex-wrap:wrap;justify-content:center}.territory-btn-test{padding:8px 14px;border:1px solid var(--grid);border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease;background:var(--panel);color:var(--text);min-width:80px;position:relative;overflow:hidden}.territory-btn-test:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);transition:left .5s}.territory-btn-test:hover:before{left:100%}.territory-btn-test.api{border-color:var(--accent);background:#4ecdc41a}.territory-diagnostics-log{margin-top:20px;padding:15px;background:#0000004d;border:1px solid var(--grid);border-radius:6px;max-height:300px;overflow-y:auto}.territory-diagnostics-log h4{margin:0 0 12px;color:var(--text);font-size:14px;text-align:center}.diagnostics-entries{display:flex;flex-direction:column;gap:4px}.diagnostic-entry{display:flex;gap:10px;font-size:11px;font-family:monospace;padding:4px 8px;border-radius:3px;align-items:center}.diagnostic-entry.info{background:#4ecdc41a;color:var(--accent)}.diagnostic-entry.success{background:#51cf661a;color:var(--ok)}.diagnostic-entry.error{background:#ff6b6b1a;color:var(--warn)}.diagnostic-time{font-weight:700;min-width:70px;flex-shrink:0}.diagnostic-message{word-break:break-word}.territory-error-details{margin-top:20px;padding:15px;background:#ff6b6b1a;border:1px solid var(--warn);border-radius:6px}.territory-error-details h4{margin:0 0 12px;color:var(--warn);font-size:14px;text-align:center}.error-detail-item{margin-bottom:8px;font-size:12px;font-family:monospace;color:var(--text-dim);word-break:break-word}.error-detail-item strong{color:var(--text)}.error-detail-item pre{margin:4px 0 0;padding:8px;background:#0000004d;border-radius:4px;font-size:10px;overflow-x:auto;white-space:pre-wrap}.territory-btn-test.clear{border-color:var(--warn);background:#ff6b6b1a;color:var(--warn)}.territory-btn-test.clear:hover{background:var(--warn);color:var(--bg)}.territory-btn-test.direct{border-color:var(--accent);background:#4ecdc426}.territory-btn-test:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0003}.territory-form{margin:25px 0}.territory-form-group{margin-bottom:20px;position:relative}.territory-input{width:100%;padding:14px 16px;border:2px solid var(--grid);border-radius:8px;font-size:16px;background:var(--bg);color:var(--text);transition:all .3s ease;position:relative}.territory-input::placeholder{color:var(--text-dim)}.territory-input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 12px #4ecdc44d;background:var(--panel)}.territory-login-btn{width:100%;padding:16px;border:2px solid var(--accent);border-radius:8px;background:var(--accent);color:var(--bg);font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;text-transform:uppercase;letter-spacing:.5px}.btn-grid-effect{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,transparent 1px,rgba(255,255,255,.1) 1px),linear-gradient(rgba(255,255,255,.1) 1px,transparent 1px);background-size:20px 20px;opacity:0;transition:opacity .3s ease}.territory-login-btn:hover .btn-grid-effect{opacity:1}.territory-login-btn:hover{background:var(--ok);border-color:var(--ok);transform:translateY(-2px);box-shadow:0 8px 16px #4ecdc466}.territory-login-btn:active{transform:translateY(0)}.territory-login-btn:disabled{opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}.territory-signup-link{text-align:center;margin-top:25px;padding-top:20px;border-top:1px solid var(--grid)}.territory-signup-link p{color:var(--text-dim);margin:0;font-size:14px}.territory-link{color:var(--accent);text-decoration:none;font-weight:500;transition:color .2s ease}.territory-link:hover{color:var(--ok);text-decoration:underline}.territory-diagnostics-footer{position:fixed;bottom:0;left:0;right:0;background:#1a1a1af2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top:1px solid rgba(78,205,196,.3);z-index:1000}.territory-diagnostics-toggle{width:100%;padding:12px 20px;background:none;border:none;color:var(--accent);font-family:Orbitron,monospace;font-size:14px;font-weight:600;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all .3s ease}.territory-diagnostics-toggle:hover{background:#4ecdc41a}.toggle-icon{font-size:12px;transition:transform .3s ease}.toggle-icon.open{transform:rotate(180deg)}.territory-diagnostics-panel{padding:20px;border-top:1px solid rgba(78,205,196,.2);max-height:60vh;overflow-y:auto;animation:slideUp .3s ease-out}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.territory-diagnostics-panel h4{color:var(--accent);font-family:Orbitron,monospace;font-size:14px;margin-bottom:15px;text-transform:uppercase;letter-spacing:1px}.info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px;margin-bottom:20px;font-size:12px;color:var(--text-dim)}.info-grid div{padding:8px;background:#4ecdc40d;border-radius:4px;border-left:2px solid var(--accent)}.territory-diagnostic-tools,.form-group{margin-bottom:20px}.form-group input,.form-group select{width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:16px}.auth-form button{width:100%;margin-bottom:20px}.auth-form p{text-align:center;color:#666}.auth-form a{color:#007bff;text-decoration:none}.territory-dashboard{min-height:100vh;background:var(--bg);position:relative;overflow-x:hidden}.dashboard-bg-grid{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,var(--grid) 1px,transparent 1px),linear-gradient(var(--grid) 1px,transparent 1px);background-size:80px 80px;opacity:.05;animation:dashboardGridFlow 30s linear infinite;z-index:0}@keyframes dashboardGridFlow{0%{transform:translate(0)}to{transform:translate(80px,80px)}}.dashboard-overlay{position:relative;z-index:1;max-width:1400px;margin:0 auto;padding:30px}.territory-dashboard-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:50px;padding:30px;background:var(--panel);border:2px solid var(--grid);border-radius:16px;box-shadow:0 10px 30px #0000004d,inset 0 0 20px #4ecdc40d;position:relative;overflow:hidden}.territory-dashboard-header:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--ok),var(--warn),var(--accent));animation:headerProgress 4s ease-in-out infinite}@keyframes headerProgress{0%,to{transform:translate(-100%)}50%{transform:translate(100%)}}.dashboard-title-section{display:flex;align-items:center;gap:20px}.dashboard-logo{display:flex;align-items:center;justify-content:center}.dashboard-logo-grid{display:grid;grid-template-columns:repeat(3,16px);gap:2px;margin-right:15px}.dashboard-logo-grid .logo-cell{width:16px;height:16px;border:1px solid var(--grid);border-radius:2px;background:var(--panel);transition:all .3s ease}.dashboard-logo-grid .logo-cell.active.player1{background:var(--accent);box-shadow:0 0 8px #4ecdc499;animation:cellPulse 2s ease-in-out infinite}.dashboard-logo-grid .logo-cell.active.player2{background:var(--ok);box-shadow:0 0 8px #51cf6699;animation:cellPulse 2s ease-in-out infinite .3s}.dashboard-logo-grid .logo-cell.active.player3{background:var(--warn);box-shadow:0 0 8px #ffd43b99;animation:cellPulse 2s ease-in-out infinite .6s}@keyframes cellPulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.dashboard-title-text h1{margin:0 0 8px;color:var(--text);font-size:32px;font-weight:700;text-shadow:0 2px 4px rgba(0,0,0,.3)}.welcome-commander{color:var(--text-dim);margin:0 0 10px;font-size:16px}.status-indicator{display:flex;align-items:center;gap:8px;font-size:14px}.status-dot{width:8px;height:8px;border-radius:50%;animation:statusBlink 2s ease-in-out infinite}.status-dot.online{background:var(--ok);box-shadow:0 0 8px #51cf6699}@keyframes statusBlink{0%,to{opacity:1}50%{opacity:.5}}.status-text{color:var(--text-dim);font-weight:500}.dashboard-actions{display:flex;gap:12px;align-items:center}.territory-btn-primary,.territory-btn-secondary,.territory-btn-logout,.territory-btn-play,.territory-btn-danger,.territory-btn-create,.territory-btn-cancel,.territory-btn-danger-confirm{display:flex;align-items:center;gap:8px;padding:12px 20px;border:2px solid;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;text-decoration:none;position:relative;overflow:hidden}.territory-btn-primary{background:var(--accent);border-color:var(--accent);color:var(--bg)}.territory-btn-primary:hover{background:var(--ok);border-color:var(--ok);transform:translateY(-2px);box-shadow:0 6px 20px #4ecdc466}.territory-btn-secondary{background:var(--panel);border-color:var(--grid);color:var(--text)}.territory-btn-secondary:hover{background:var(--accent);border-color:var(--accent);color:var(--bg);transform:translateY(-1px)}.territory-btn-logout{background:var(--panel);border-color:var(--warn);color:var(--warn)}.territory-btn-logout:hover{background:var(--warn);color:var(--bg);transform:translateY(-1px)}.territory-btn-play{background:var(--ok);border-color:var(--ok);color:var(--bg);flex:2;justify-content:center;text-decoration:none}.territory-btn-play:hover{background:var(--accent);border-color:var(--accent);transform:translateY(-2px);box-shadow:0 6px 16px #51cf6666}.territory-btn-danger{background:var(--panel);border-color:#dc3545;color:#dc3545}.territory-btn-danger:hover{background:#dc3545;border-color:#dc3545;color:#fff;transform:translateY(-1px)}.territory-btn-create{background:var(--accent);border-color:var(--accent);color:var(--bg)}.territory-btn-create:hover{background:var(--ok);border-color:var(--ok);transform:translateY(-2px);box-shadow:0 6px 20px #4ecdc466}.territory-btn-cancel{background:var(--panel);border-color:var(--grid);color:var(--text-dim)}.territory-btn-cancel:hover{background:var(--grid);color:var(--text)}.territory-btn-danger-confirm{background:#dc3545;border-color:#dc3545;color:#fff}.territory-btn-danger-confirm:hover{background:#c82333;border-color:#c82333;transform:translateY(-2px);box-shadow:0 6px 20px #dc354566}.btn-icon{font-size:16px}.territory-games-section{margin-top:30px}.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px 25px;background:var(--panel);border:1px solid var(--grid);border-radius:12px}.section-header h2{margin:0;color:var(--text);font-size:24px;font-weight:700}.section-stats{display:flex;gap:20px}.stat-item{display:flex;align-items:center;gap:6px;padding:8px 12px;background:var(--bg);border:1px solid var(--grid);border-radius:6px}.stat-icon{font-size:14px}.stat-text{font-size:14px;font-weight:500;color:var(--text-dim)}.territory-empty-state{text-align:center;padding:80px 40px;background:var(--panel);border:2px dashed var(--grid);border-radius:16px;margin:40px 0}.empty-state-icon{margin-bottom:30px}.empty-grid{display:inline-grid;grid-template-columns:repeat(3,30px);gap:4px;margin-bottom:20px}.empty-cell{width:30px;height:30px;border:2px dashed var(--grid);border-radius:4px;display:flex;align-items:center;justify-content:center;color:var(--text-dim);font-size:18px;font-weight:700}.empty-cell.center{border-color:var(--accent);color:var(--accent);animation:emptyPulse 2s ease-in-out infinite}@keyframes emptyPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.territory-empty-state h3{margin:0 0 15px;color:var(--text);font-size:24px}.territory-empty-state p{margin:0 0 30px;color:var(--text-dim);font-size:16px}.territory-games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:25px;margin:30px 0}.territory-game-card{background:var(--panel);border:2px solid var(--grid);border-radius:16px;overflow:hidden;transition:all .3s ease;position:relative}.territory-game-card:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--ok),var(--warn));opacity:0;transition:opacity .3s ease}.territory-game-card:hover:before{opacity:1}.territory-game-card:hover{transform:translateY(-5px);box-shadow:0 15px 40px #0000004d;border-color:var(--accent)}.game-card-header{padding:25px 25px 20px;border-bottom:1px solid var(--grid)}.game-title-section{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.game-title-section h3{margin:0;color:var(--text);font-size:20px;font-weight:600}.game-type-badge{display:flex;align-items:center;gap:4px;padding:4px 8px;background:#4ecdc41a;border:1px solid var(--accent);border-radius:12px;font-size:12px;color:var(--accent);font-weight:500}.territory-status{display:flex;align-items:center;gap:6px;padding:6px 10px;border-radius:8px;font-size:13px;font-weight:500}.territory-status.status-waiting{background:#ffd43b1a;border:1px solid var(--warn);color:var(--warn)}.territory-status.status-active{background:#51cf661a;border:1px solid var(--ok);color:var(--ok)}.territory-status.status-finished{background:#4ecdc41a;border:1px solid var(--accent);color:var(--accent)}.territory-status.status-abandoned{background:#dc35451a;border:1px solid #dc3545;color:#dc3545}.status-icon{font-size:14px}.game-preview{position:relative;height:120px;background:var(--bg);margin:0 25px 20px;border-radius:8px;border:1px solid var(--grid);overflow:hidden}.preview-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:1px;height:100%;width:100%;background:var(--grid)}.preview-cell{background:var(--panel);transition:all .3s ease}.preview-cell.occupied.p1{background:var(--accent)}.preview-cell.occupied.p2{background:var(--ok)}.preview-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#0009;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.territory-game-card:hover .preview-overlay{opacity:1}.preview-text{color:#fff;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.game-info{padding:0 25px 20px;border-bottom:1px solid var(--grid)}.commander-info,.players-roster{margin-bottom:12px}.commander-label,.roster-label{font-size:13px;color:var(--text-dim);font-weight:500;margin-right:8px}.commander-name{color:var(--accent);font-weight:600}.player-indicators{display:flex;align-items:center;gap:8px;margin-top:8px}.player-badge{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;border:2px solid}.player-badge.p1{background:var(--accent);border-color:var(--accent);color:var(--bg)}.player-badge.p2{background:var(--ok);border-color:var(--ok);color:var(--bg)}.player-badge.p3{background:var(--warn);border-color:var(--warn);color:var(--bg)}.player-badge.more{background:var(--panel);border-color:var(--grid);color:var(--text-dim)}.no-players{font-size:12px;color:var(--text-dim);font-style:italic}.territory-game-actions{padding:20px 25px;display:flex;gap:10px}.territory-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.territory-modal-content{background:var(--panel);border:2px solid var(--grid);border-radius:16px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 25px 50px #00000080}.territory-modal-content.danger{border-color:#dc3545}.modal-header{padding:25px 25px 15px;border-bottom:1px solid var(--grid)}.modal-header.danger{border-bottom-color:#dc3545}.modal-header h2{margin:0 0 5px;color:var(--text);font-size:22px;font-weight:700}.modal-subtitle{color:var(--text-dim);font-size:14px;margin:0}.territory-create-form,.territory-recruit-form{padding:25px}.territory-label{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:14px;font-weight:600;color:var(--text)}.label-icon{font-size:16px}.campaign-info,.recruit-info{margin:25px 0;padding:20px;background:#4ecdc40d;border:1px solid var(--grid);border-radius:8px}.info-header{display:flex;align-items:center;gap:8px;margin-bottom:15px}.info-icon{font-size:18px}.info-title{font-size:16px;font-weight:600;color:var(--text)}.info-features{display:grid;gap:10px}.feature-item,.info-item{display:flex;align-items:center;gap:10px;font-size:14px;color:var(--text-dim)}.feature-icon{font-size:16px;width:20px;text-align:center}.territory-form-actions{display:flex;gap:12px;margin-top:25px}.territory-form-actions.danger{padding-top:15px;border-top:1px solid #dc3545}.danger-warning{padding:25px;background:#dc35451a;border:1px solid #dc3545;border-radius:8px;margin:25px;display:flex;gap:15px}.warning-icon{font-size:24px;color:#dc3545;flex-shrink:0}.warning-content p{margin:0 0 10px;color:var(--text)}.campaign-details{margin-top:15px;padding:10px 0;border-top:1px solid var(--grid)}.detail-label{font-weight:600;color:var(--text-dim);margin-right:8px}.detail-value{color:var(--text);font-weight:500}.games-section h2{margin-bottom:20px}.empty-state{text-align:center;padding:60px 20px;background:#fff;border-radius:8px;color:#666}.games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.game-card{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.game-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.game-header h3{margin:0;color:#333}.status{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-waiting{background:#fff3cd;color:#856404}.status-active{background:#d1ecf1;color:#0c5460}.status-finished{background:#d4edda;color:#155724}.status-abandoned{background:#f8d7da;color:#721c24}.game-info p{margin-bottom:5px;color:#666}.players{margin:10px 0;font-size:14px}.game-actions{display:flex;gap:10px;margin-top:15px}.game-actions .btn-primary{flex:2;text-align:center;text-decoration:none;display:inline-block}.game-actions .btn-secondary{flex:1;text-align:center;text-decoration:none;display:inline-block}.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content{background:#fff;padding:30px;border-radius:8px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-content h2{margin-bottom:20px}.form-actions{display:flex;gap:10px;margin-top:20px}.form-actions button{flex:1}.game-room{max-width:1200px;margin:0 auto;padding:20px}.game-header{margin-bottom:20px}.back-link{color:#007bff;text-decoration:none;margin-bottom:10px;display:inline-block}.game-header h1{margin:10px 0 5px}.game-meta{display:flex;gap:10px;align-items:center}.game-type{background:#e9ecef;padding:4px 8px;border-radius:4px;font-size:12px;text-transform:uppercase;font-weight:500}.game-content{display:grid;grid-template-columns:300px 1fr;gap:20px}.game-sidebar{background:#fff;border-radius:8px;padding:20px;height:fit-content;box-shadow:0 2px 4px #0000001a}.players-section h3,.moves-section h3{margin-bottom:15px;color:#333}.players-list{margin-bottom:20px}.player{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #eee}.player:last-child{border-bottom:none}.player.current-turn{background:#e7f3ff;padding:8px 12px;border-radius:4px;border-bottom:1px solid #cce7ff}.owner-badge{background:#28a745;color:#fff;padding:2px 6px;border-radius:10px;font-size:10px}.turn-indicator{background:#007bff;color:#fff;padding:2px 6px;border-radius:10px;font-size:10px}.moves-section{margin-top:30px}.moves-list{max-height:200px;overflow-y:auto;border:1px solid #eee;border-radius:4px;padding:10px}.move{padding:5px 0;font-size:14px;border-bottom:1px solid #f5f5f5}.move:last-child{border-bottom:none}.move-player{font-weight:500;margin-right:8px}.game-main{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.waiting-message,.game-finished,.game-abandoned{text-align:center;padding:60px 20px;color:#666}.game-active .turn-indicator{text-align:center;margin-bottom:30px}.game-state{margin:20px 0;padding:15px;background:#f8f9fa;border-radius:4px}.game-state pre{font-size:12px;color:#495057;overflow-x:auto}.move-input{margin-top:30px}.move-input form{display:flex;gap:10px}.move-input input{flex:1;padding:10px;border:1px solid #ddd;border-radius:4px}@media (max-width: 768px){.dashboard-overlay{padding:15px}.territory-dashboard-header{flex-direction:column;gap:25px;text-align:center;padding:25px 20px}.dashboard-title-text h1{font-size:26px}.dashboard-actions{flex-direction:column;width:100%;gap:8px}.dashboard-actions button{width:100%;justify-content:center}.territory-games-grid{grid-template-columns:1fr;gap:20px}.territory-game-card{margin:0 5px}.territory-auth-form{margin:20px;padding:30px 25px}.territory-test-buttons{flex-direction:column;gap:6px}.territory-btn-test{width:100%;justify-content:center}.territory-modal-content{margin:20px;max-width:none}.territory-form-actions{flex-direction:column}.territory-form-actions button{width:100%;justify-content:center}.section-stats{flex-direction:column;gap:8px}.stat-item{justify-content:center}}@media (max-width: 480px){.territory-auth-form{margin:10px;padding:25px 20px}.dashboard-overlay{padding:10px}.territory-dashboard-header{padding:20px 15px}.dashboard-title-text h1{font-size:22px}.welcome-commander{font-size:14px}.game-preview{height:100px;margin:0 15px 15px}.game-card-header,.game-info,.territory-game-actions{padding-left:20px;padding-right:20px}.territory-empty-state{padding:60px 25px}.empty-grid{grid-template-columns:repeat(3,25px)}.empty-cell{width:25px;height:25px}}@media (prefers-reduced-motion: reduce){.territory-grid-bg,.dashboard-bg-grid,.gridShift,.dashboardGridFlow,.borderGlow,.headerProgress,.cellPulse,.statusBlink,.emptyPulse{animation:none!important}.territory-game-card:hover,.territory-btn-primary:hover,.territory-btn-play:hover{transform:none!important}}.color-picker-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.color-picker-modal{background:var(--panel);border-radius:12px;padding:24px;max-width:400px;max-height:80vh;overflow-y:auto;box-shadow:0 8px 32px #0000004d;border:1px solid var(--grid)}.color-picker-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.color-picker-header h3{color:var(--text);margin:0;font-size:20px}.close-button{background:transparent;border:none;font-size:28px;color:var(--text-dim);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.close-button:hover:not(:disabled){background:var(--grid);color:var(--text)}.color-picker-note{margin-bottom:20px;color:var(--text-dim);font-size:14px}.color-picker-note p{margin:4px 0}.color-picker-info{font-style:italic;color:var(--accent)}.color-picker-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:24px}.color-option{width:60px;height:60px;border:3px solid transparent;border-radius:12px;cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .2s ease;box-shadow:0 2px 8px #0003}.color-option:hover:not(:disabled){transform:scale(1.05);box-shadow:0 4px 16px #0000004d}.color-option.current{border-color:var(--accent);box-shadow:0 0 12px var(--accent)}.color-option.used{opacity:.4;cursor:not-allowed}.color-option:disabled{cursor:not-allowed}.checkmark{color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700}.lock{opacity:.8}.color-picker-actions{display:flex;justify-content:flex-end;gap:12px}.cancel-button{background:var(--grid);color:var(--text);border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;transition:background .2s ease}.cancel-button:hover:not(:disabled){background:var(--text-dim)}.cancel-button:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 480px){.color-picker-modal{margin:16px;max-width:calc(100vw - 32px);padding:16px}.color-picker-grid{grid-template-columns:repeat(3,1fr);gap:8px}.color-option{width:50px;height:50px}}
